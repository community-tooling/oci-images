name: "Update unbound root hints"
on:
  workflow_dispatch:
  schedule:
    - cron: "0 0 1 * *"

jobs:
  update-root-hints:
    name: Update unbound root hints
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@0ad4b8fadaa221de15dcec353f45205ec38ea70b # v4.1.4
        with:
          token: ${{ secrets.BOT_FILE_UPDATE_TOKEN }}

      - name: Update root hints
        run: curl --output images/unbound/root.hints https://www.internic.net/domain/named.cache

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@6d6857d36972b65feb161a90e484f2984215f83e # v6.0.5
        with:
          token: ${{ secrets.BOT_FILE_UPDATE_TOKEN }}
          branch: chore/update-unbound-root-hints
          title: "chore(patch): update root hints"
          body: |
            This updates the root.hints file for unbound. As usual, the Arch wiki has a good explanation: https://wiki.archlinux.org/title/unbound#Root_hints.
