name: "Update unbound root hints"
on:
  workflow_dispatch:
  schedule:
    - cron: "0 0 1 * *"

jobs:
  update-root-hints:
    name: Update unbound root hints
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@9bb56186c3b09b4f86b1c65136769dd318469633 # v4.1.2
        with:
          token: ${{ secrets.BOT_FILE_UPDATE_TOKEN }}

      - name: Update root hints
        run: curl --output images/unbound/root.hints https://www.internic.net/domain/named.cache

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@c55203cfde3e5c11a452d352b4393e68b85b4533 # v6.0.3
        with:
          token: ${{ secrets.BOT_FILE_UPDATE_TOKEN }}
          branch: chore/update-unbound-root-hints
          title: "chore(patch): update root hints"
          body: |
            This updates the root.hints file for unbound. As usual, the Arch wiki has a good explanation: https://wiki.archlinux.org/title/unbound#Root_hints.
